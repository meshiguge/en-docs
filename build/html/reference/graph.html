

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Visualization of Computational Graph &mdash; Chainer 1.8.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/modified_theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Chainer 1.8.0 documentation" href="../index.html"/>
        <link rel="up" title="Chainer Reference Manual" href="index.html"/>
        <link rel="next" title="Environment variables" href="environment.html"/>
        <link rel="prev" title="Caffe Reference Model Support" href="caffe.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> Chainer</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#before-installing-chainer">Before installing Chainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#install-chainer">Install Chainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#uninstall-chainer">Uninstall Chainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#upgrade-chainer">Upgrade Chainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#reinstall-chainer">Reinstall Chainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#run-chainer-with-docker">Run Chainer with Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#what-recommend-means">What &#8220;recommend&#8221; means?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#faq">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Chainer Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/basic.html">Introduction to Chainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/recurrentnet.html">Recurrent Nets and their Computational Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/gpu.html">Using GPU(s) in Chainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/function.html">Define your own function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/type_check.html">Type check</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Chainer Reference Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="core.html">Core functionalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="util.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="check.html">Assertion and Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html">Standard Function implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="links.html">Standard Link implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimizers.html">Optimizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="serializers.html">Serializers</a></li>
<li class="toctree-l2"><a class="reference internal" href="function_hooks.html">Function hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="initializers.html">Weight Initializers</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasets.html">Dataset examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterators.html">Iterator examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html">Trainer extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="triggers.html">Trainer triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="caffe.html">Caffe Reference Model Support</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Visualization of Computational Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="environment.html">Environment variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cupy-reference/index.html">CuPy Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/overview.html">CuPy Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/ndarray.html">Multi-Dimensional Array (ndarray)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/ufunc.html">Universal Functions (ufunc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/routines.html">Routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/generic.html">NumPy-CuPy Generic Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/cuda.html">Low-Level CUDA Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/memoize.html">Kernel binary memoization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/kernel.html">User-Defined Kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/testing.html">Testing Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/environment.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cupy-reference/difference.html">Difference between CuPy and NumPy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribution.html">Chainer Contribution Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribution.html#classification-of-contributions">Classification of Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribution.html#release-and-milestone">Release and Milestone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribution.html#issues-and-prs">Issues and PRs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribution.html#coding-guidelines">Coding Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribution.html#testing-guidelines">Testing Guidelines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../compatibility.html">API Compatibility Policy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../compatibility.html#targeted-versions">Targeted Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compatibility.html#versioning-and-backward-compatibilities">Versioning and Backward Compatibilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compatibility.html#processes-to-break-backward-compatibilities">Processes to Break Backward Compatibilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compatibility.html#experimental-apis">Experimental APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compatibility.html#supported-backward-compatibility">Supported Backward Compatibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compatibility.html#model-format-compatibility">Model Format Compatibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compatibility.html#installation-compatibility">Installation Compatibility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tips.html">Tips and FAQs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tips.html#it-takes-too-long-time-to-compile-a-computational-graph-can-i-skip-it">It takes too long time to compile a computational graph. Can I skip it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tips.html#mnist-example-does-not-converge-in-cpu-mode-on-mac-os-x">mnist example does not converge in CPU mode on Mac OS X</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../comparison.html">Comparison with Other Frameworks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../comparison.html#a-table-for-quick-comparison">A table for quick comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="../comparison.html#benchmarks">Benchmarks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../license.html#cupy">CuPy</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Chainer</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Chainer Reference Manual</a> &raquo;</li>
      
    <li>Visualization of Computational Graph</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/reference/graph.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="module-chainer.computational_graph">
<span id="visualization-of-computational-graph"></span><h1>Visualization of Computational Graph<a class="headerlink" href="#module-chainer.computational_graph" title="Permalink to this headline">¶</a></h1>
<p>As neural networks get larger and complicated, it gets much harder to confirm if their architectures are constructed properly.
Chainer supports visualization of computational graphs.
Users can generate computational graphs by invoking <a class="reference internal" href="#chainer.computational_graph.build_computational_graph" title="chainer.computational_graph.build_computational_graph"><code class="xref py py-meth docutils literal"><span class="pre">build_computational_graph()</span></code></a>. Generated computational graphs are dumped to specified format (Currently <a class="reference external" href="https://en.wikipedia.org/wiki/DOT_(graph_description_language)">Dot Language</a> is supported).</p>
<p>Basic usage is as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">chainer.computational_graph</span> <span class="kn">as</span> <span class="nn">c</span>
<span class="o">...</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">build_computational_graph</span><span class="p">(</span><span class="n">vs</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;path/to/output/file&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">o</span><span class="p">:</span>
    <span class="n">o</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">dump</span><span class="p">())</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">vs</span></code> is list of <code class="xref py py-class docutils literal"><span class="pre">Variable</span></code> instances and <code class="docutils literal"><span class="pre">g</span></code> is an instance of <a class="reference internal" href="#chainer.computational_graph.ComputationalGraph" title="chainer.computational_graph.ComputationalGraph"><code class="xref py py-class docutils literal"><span class="pre">ComputationalGraph</span></code></a>.
This code generates the computational graph that are backward-reachable (i.e. reachable by repetition of steps backward) from at least one of <code class="docutils literal"><span class="pre">vs</span></code>.</p>
<p>Here is an example of (a part of) the generated graph (inception(3a) in <a class="reference external" href="https://arxiv.org/abs/1409.4842">GoogLeNet</a>). This example is from <code class="docutils literal"><span class="pre">example/imagenet</span></code>.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/googlenet.png"><img alt="../_images/googlenet.png" src="../_images/googlenet.png" style="width: 535.2px; height: 429.6px;" /></a>
</div>
<dl class="function">
<dt id="chainer.computational_graph.build_computational_graph">
<code class="descclassname">chainer.computational_graph.</code><code class="descname">build_computational_graph</code><span class="sig-paren">(</span><em>outputs</em>, <em>remove_split=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/chainer/computational_graph.html#build_computational_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.computational_graph.build_computational_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a graph of functions and variables backward-reachable from outputs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>outputs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) &#8211; nodes from which the graph is constructed.
Each element of outputs must be either <code class="xref py py-class docutils literal"><span class="pre">Variable</span></code>
object or <code class="xref py py-class docutils literal"><span class="pre">Function</span></code> object.</li>
<li><strong>remove_split</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a>) &#8211; It must be <code class="docutils literal"><span class="pre">True</span></code>. This argument is left for
backward compatibility.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>A graph consisting of nodes and edges that
are backward-reachable from at least one of <code class="docutils literal"><span class="pre">outputs</span></code>.</p>
<p>If <code class="docutils literal"><span class="pre">unchain_backward</span></code> was called in some variable in the
computational graph before this function, backward step is
stopped at this variable.</p>
<p>For example, suppose that computational graph is as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>    |--&gt; f ---&gt; y
x --+
    |--&gt; g ---&gt; z
</pre></div>
</div>
<p>Let <code class="docutils literal"><span class="pre">outputs</span> <span class="pre">=</span> <span class="pre">[y,</span> <span class="pre">z]</span></code>.
Then the full graph is emitted.</p>
<p>Next, let <code class="docutils literal"><span class="pre">outputs</span> <span class="pre">=</span> <span class="pre">[y]</span></code>. Note that <code class="docutils literal"><span class="pre">z</span></code> and <code class="docutils literal"><span class="pre">g</span></code>
are not backward-reachable from <code class="docutils literal"><span class="pre">y</span></code>.
The resulting graph would be following:</p>
<div class="highlight-python"><div class="highlight"><pre>x ---&gt; f ---&gt; y
</pre></div>
</div>
<p>See <code class="xref py py-class docutils literal"><span class="pre">TestGraphBuilder</span></code> for details.</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#chainer.computational_graph.ComputationalGraph" title="chainer.computational_graph.ComputationalGraph">ComputationalGraph</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="chainer.computational_graph.ComputationalGraph">
<em class="property">class </em><code class="descclassname">chainer.computational_graph.</code><code class="descname">ComputationalGraph</code><span class="sig-paren">(</span><em>nodes</em>, <em>edges</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/chainer/computational_graph.html#ComputationalGraph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.computational_graph.ComputationalGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that represents computational graph.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We assume that the computational graph is directed and acyclic.</p>
</div>
<dl class="method">
<dt id="chainer.computational_graph.ComputationalGraph.dump">
<code class="descname">dump</code><span class="sig-paren">(</span><em>format='dot'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/chainer/computational_graph.html#ComputationalGraph.dump"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.computational_graph.ComputationalGraph.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps graph as a text.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>format</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) &#8211; The graph language name of the output.</li>
<li><strong>it must be 'dot'.</strong> (<em>Currently,</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The graph in specified format.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="environment.html" class="btn btn-neutral float-right" title="Environment variables">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="caffe.html" class="btn btn-neutral" title="Caffe Reference Model Support"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Preferred Networks, inc. and Preferred Infrastructure, inc..
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.8.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>